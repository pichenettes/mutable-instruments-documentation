<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Émilie Gillet" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Open source - Mutable Instruments Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Open source";
        var mkdocs_page_input_path = "modules/braids/open_source.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Mutable Instruments Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Modules</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Beads</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../beads/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../beads/manual/">Manual</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../beads/original_blurb/">Original blurb</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Blades</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../blades/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../blades/manual/">Manual</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../blades/open_source/">Open source</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../blades/original_blurb/">Original blurb</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Blinds</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../blinds/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../blinds/manual/">Manual</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../blinds/open_source/">Open source</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../blinds/original_blurb/">Original blurb</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Braids</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../firmware/">Firmware</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../manual/">Manual</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Open source</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#playground">Playground</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#toolchain">Toolchain</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#firmware-programming">Firmware programming</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../original_blurb/">Original blurb</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Branches</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../branches/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../branches/firmware/">Firmware</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../branches/manual/">Manual</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../branches/open_source/">Open source</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../branches/original_blurb/">Original blurb</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Clouds</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../clouds/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../clouds/firmware/">Firmware</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../clouds/manual/">Manual</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../clouds/open_source/">Open source</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../clouds/original_blurb/">Original blurb</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Ears</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ears/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ears/manual/">Manual</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ears/open_source/">Open source</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ears/original_blurb/">Original blurb</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Mutable Instruments Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Modules &raquo;</li>
          <li>Braids &raquo;</li>
      <li>Open source</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p><a href="https://github.com/pichenettes/eurorack/tree/master/braids">Github repository</a></p>
<p><a href="../downloads/braids_v50.pdf">Schematics</a></p>
<h2 id="firmware-hacking">Firmware hacking</h2>
<p>Braids' source code is available under the MIT licence.</p>
<p>The code (along with the hardware description files) can be found in the <code>braids</code> directory in our <a href="https://github.com/pichenettes/eurorack">Eurorack modules git repository</a>.</p>
<p>After having cloned the repository, don't forget to run <code>git submodule init &amp;&amp; git submodule update</code> to make sure the sub-projects referenced in the code are also pulled.</p>
<h3 id="playground">Playground</h3>
<p>A simple way of testing the oscillators code locally on a desktop computer, without long flash/test cycles, is to use the command line program in braids/test. It can be built and run with <code>make -f braids/test/makefile &amp;&amp; ./oscillator_test</code>. No embedded toolchain is needed for that! The program generates a .wav file, <code>oscillator.wav</code>. Playing with the methods of the <code>MacroOscillator</code> class is a good way of familiarizing oneself's with Braids code.</p>
<h3 id="toolchain">Toolchain</h3>
<p>If you don't mind installing <a href="https://www.vagrantup.com/">Vagrant</a> and <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a> a <a href="https://github.com/pichenettes/mutable-dev-environment">cozy environment</a> for firmware hacking is available.</p>
<p>If you want to set up your own environment to build Braids' code, an ARM EABI toolchain must be installed. Because of tight CPU and code size limits, we recommend you to use the same compiler version as we do: <code>4.8-2013-q4-major</code>. Various pre-compiled binaries and source packages are available <a href="https://launchpad.net/gcc-arm-embedded/4.8/4.8-2013-q4-major/">here</a>.</p>
<p>The path to the toolchain binaries must be specified in the <code>TOOLCHAIN_PATH</code> variable in <code>braids/makefile</code>.</p>
<p>To build the bootloader, use the following command:</p>
<pre><code>make -f braids/bootloader/makefile hex
</code></pre>
<p>To build the code, use the following command:</p>
<pre><code>make -f braids/makefile
</code></pre>
<p>If you modify lookup tables and want the big <code>resources.cc</code> file to be regenerated:</p>
<pre><code>touch braids/resources/resources.py &amp;&amp; make -f braids/makefile resources
</code></pre>
<h3 id="firmware-programming">Firmware programming</h3>
<p>A first solution is to simply use the firmware update procedure. A .wav file for firmware upgrade can be generated with:</p>
<pre><code>make -f braids/makefile wav
</code></pre>
<p>The firmware can then be loaded into the module using the procedure described in the manual.</p>
<p><strong>Past this point, we assume you know what you are doing and we are not responsible for any damage to your module!</strong></p>
<p>Another solution is to use the built-in serial bootloader of the STM32F. Connect a FTDI dongle with a 3.3V output level (<a href="http://www.adafruit.com/products/284">such as this</a>) to the 6 pin connector at the back of the module. If necessary, edit the serial port special file corresponding to the FTDI dongle in the PGM_SERIAL_PORT variable in stmlib/makefile.inc. GND must match GND, TX must match RX and vice-versa.</p>
<p>Hold the <strong>RESET</strong> switch on the side of the module. Press the <strong>SYSBOOT</strong> switch next to it, and release <strong>RESET</strong>. Nothing is shown on the module display (it is in bootloader limbo...)</p>
<p>Upload the firmware with:</p>
<pre><code>make -f braids/makefile upload_combo_serial
</code></pre>
<p>The last – and recommended – solution for firmware programming is to use a JTAG interface and openOCD. We recommend Olimex' <a href="https://www.olimex.com/Products/ARM/JTAG/ARM-USB-OCD-H/">ARM-USB-OCD-H devices</a>. An adapter must also be purchased for the <a href="http://www.embeddedartists.com/products/acc/acc_jtag_adapter_kit.php">mini-JTAG</a> connector used by Braids.</p>
<p>Upload the firmware with:</p>
<pre><code>make -f braids/makefile upload_combo_jtag
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../manual/" class="btn btn-neutral float-left" title="Manual"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../original_blurb/" class="btn btn-neutral float-right" title="Original blurb">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../manual/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../original_blurb/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
